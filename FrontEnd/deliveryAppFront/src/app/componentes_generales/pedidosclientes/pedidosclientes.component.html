<div class="container-fluid pedidosClientes">

    <!-- Título -->
    <br>
    <div class="row">
        <div class="col-3 text-center mx-auto containerTitMenu">
            <strong><h1 class="border border-warning">MENU</h1></strong>
            <br>
        </div>
    </div>

    <!-- Platos -->
    <div class="row mb-4">
        <ng-container *ngFor="let PlatosAMostrar of platosAMostrarList; let i = index">
            <div class="col-md-6 mb-4">
                <div class="border rounded p-3 containerPedidosClientes">
                    <!-- padding y margen a cada tarjeta -->
                    <div class="row">
                        <!-- Nombre del plato -->
                        <strong class="row text-center justify-content-center">
                            <div class="col-6 ">
                                <i class="{{PlatosAMostrar.platos.tipoPlato.iconoTipoPlato}} opacity-50 border rounded-circle p-2"></i>
                                <h6 class="opacity-50">{{PlatosAMostrar.platos.tipoPlato.nombreTipoPlato}}</h6>
                            </div>
                            <p class="col-6 border border-danger rounded-pill p-2 mb-4">{{PlatosAMostrar.platos.nombrePlato}}</p>
                        </strong>
                        <!-- Imagen del plato -->
                        <div class="col-lg-6 col-md-12 imgPlato">
                            <img class="img-fluid border border-info rounded" src="{{PlatosAMostrar.platos.imgPlato}}">
                        </div>
                        <!-- Descripción -->
                        <div class="col-lg-6 col-md-12 text-center divDescrpPla">
                            <p class="justify-content-center">{{PlatosAMostrar.descripcionPlatoAMostrar}}</p>
                        </div>
                        <!-- MODALITO modalitoNgIfPedCli-->
                        <div class="row justify-content-center">
                            <div class="col-lg-12 col-md-12 col-sm-6">
                                <div class="modalitoNgIfPedCli border border-success rounded m-5 p-4"
                                    *ngIf="modalitosPlaPed['modalitoNgIfPedCli_' + i]">

                                    <!-- Importe unitario -->
                                    <div class="row align-items-center justify-content-center">
                                        <div class="col-lg-6 col-md-12 d-flex flex-column align-items-center border border-warning border-1 rounded-pill p-1 mb-3">
                                            Precio unitario
                                            <strong>$ {{PlatosAMostrar.platos.precioPlato}}</strong>
                                        </div>
                                    </div>
                                    <!-- Porción -->
                                    <div class="row align-items-center justify-content-center pb-3">
                                        <div class="col-lg-4 col-md-9 d-flex flex-column align-items-center">
                                            Cantidad
                                            <input type="number" [value]="porcionesPlatosList[i]"
                                                (keydown)="handleKeydown($event)"
                                                class="form-control text-center bg-transparent text-white"
                                                id="inputSelPed1"
                                                (click)="seleccionarChekBoxSiHayPorcionPla(i); calcularTotalPlato(i)"
                                                [(ngModel)]="porcionesPlatosList[i]" min="1" max="10"
                                                name="porcionPlato_{{i}}">
                                        </div>
                                    </div>
                                    <!-- Importe total del plato seleccionado -->
                                    <div class="row align-items-center justify-content-center pb-3">
                                        <div class="col-lg-4 col-md-9 d-flex flex-column align-items-center">
                                            Importe $
                                            <input readonly type="number" name="totalPlato_{{i}}" id="inputSelPed2"
                                                class="form-control text-center bg-transparent text-white"
                                                [(ngModel)]="totalesPlatosList[i]">
                                        </div>
                                    </div>
                                    <!-- Checkbox -->
                                    <div class="row align-items-center justify-content-center">
                                        <div class="col-lg-4 col-md-9 d-flex flex-column align-items-center"
                                            title="Click para seleccionar">
                                            Agregar
                                            <input type="checkbox" [checked]="platosSeleccionadosSioNo[i]"
                                                class="form-check-input text-center border border-1 rounded-2 bg-transparent p-3"
                                                id="chekSelPed"
                                                (change)="agregarPorcionesPlaSeleccionandoChekBox(i); chekBoxSeleccion(i); getListaDatosClienteAntesEnvio();"
                                                title="Click para seleccionar">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <!-- Botón para seleccionar plato -->
                    <div class="col-lg-4  containerBut text-center pt-3 justify-content-center">
                        <button class="btn btn-secondary btn-md" (click)="opCloMod('modalitoNgIfPedCli_' + i, i)">
                            Seleccionar
                        </button>
                    </div>
                </div>
            </div>
        </ng-container>

    </div>

    <!-- Botones -->
   
    <div class="row justify-content-center">
        <div class="col-md-12 text-center">
            <button class="btn btn-dark border border-warning" type="button" (click)="agregarPedido()">
                <strong>INGRESAR DATOS DE ENVIO</strong>
            </button>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-12 text-center">
            <button class="btn btn-outline-light" type="button">
                Editar platos
            </button>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-12 text-center">
            <button class="btn btn-outline-light" type="button">
                Guardar cambios
            </button>
        </div>
    </div>
    <br>
    <br>
    <br>


    <!-- DATOS CLIENTES -->

    <div class="container-fluid border rounded divDatosClientes">
        <br>
        <form novalidate #f="ngForm" class="pedidosForm" id="formularioPedidYDetPedid">
            <div class="row pt-4">
                <div class="col-lg-4 col-md-12 mx-auto text-left form-group">
                    <label for="nombreCliente">
                        <h5 class="border border-danger rounded-pill p-2">NOMBRE</h5>
                    </label>
                    <input type="text" class="form-control border border-warning border-3" id="nombreCliente"
                        name="nombreCliente" placeholder="Nombre" [(ngModel)]="nombreCliente" required>
                    <br>
                </div>
                <div class="col-lg-4 col-md-12 mx-auto text-left form-group">
                    <label for="telefonoCliente">
                        <h5 class="border border-danger rounded-pill p-2">TELEFONO</h5>
                    </label>
                    <input type="text" class="form-control border border-warning border-3" id="telefonoCliente"
                        name="telefonoCliente" placeholder="1561111111" [(ngModel)]="telefonoCliente" required>
                    <br>
                </div>
            </div>
            <div class="row pt-3">
                <div class="col-lg-4 col-md-12 mx-auto text-left form-group">
                    <label for="direccionCliente">
                        <h5 class="border border-danger rounded-pill p-2">DIRECCION</h5>
                    </label>
                    <input type="text" class="form-control border border-warning border-3" id="direccionCliente"
                        name="direccionCliente" placeholder="Avenida Santa Fe 4444 Depto b"
                        [(ngModel)]="direccionCliente" required>
                </div>
                <div class="col-lg-4 col-md-12 mx-auto text-left form-group">
                    <label for="hora">
                        <h5 class="border border-danger rounded-pill p-2">LOCALIDAD</h5>
                    </label>
                    <input type="text" class="form-control border border-warning border-3" id="localidadCliente"
                        name="localidadCliente" placeholder="Villa Urquiza" [(ngModel)]="localidadCliente" required>
                </div>
            </div>
            <br>
            <br>
            <div class="row text-center justify-content-center">
                <div class="col-12">
                    <button class="btn btn-dark border border-warning">
                        <strong>GUARDAR DATOS DE ENVIO</strong>
                    </button>
                </div>
                <div class="col-12">    
                    <button class="btn btn-outline-light btn-sm">
                        EDITAR DATOS DE ENVIO
                    </button>
                </div>
                <div class="col-12">
                    <button class="btn btn-outline-light btn-sm">
                        GUARDAR DATOS EDITADOS
                    </button>
                </div>
            </div>
        </form>
    </div>
    <br>
    <br>
    <br>
    <!-- CONFIRMACION DE PLATOS DEL PEDIDO Y DATOS PARA ENVIAR EL PEDIDO A LA DB -->

    <br>
    <br>
    <div class="container-fluid border rounded containerConfPlaDelPed">
        <br>
        <br>
        <div id="iDmodalitoEnviarPedido">
            <p class="d-flex flex-row justify-content-center h5">Pedido N° {{idPedido}}: {{mensajePedEnviadoDB}}</p>
            <div class="row text-center">
                <p>{{ 'Nombre Cliente: ' + nombreCliente }}</p>
                <p>{{ 'Teléfono Cliente: ' + telefonoCliente }}</p>
                <p>{{ 'Dirección: ' + direccionCliente }}</p>
                <p>{{ 'Localidad: ' + localidadCliente }}</p>
            </div>
            <div *ngFor="let platoSeleccionado of getPlatosSeleccionados(); let i = index">
                <ng-container *ngIf="platoSeleccionado && platoSeleccionado?.platos">
                    <div class="d-flex flex-row justify-content-center">
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-primary">Plato {{ i + 1 }}: {{ platoSeleccionado.platos.nombrePlato }}</li>
                        </ul>
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-secondary">Total: $ {{ platoSeleccionado.totalPlato }}</li>
                        </ul>
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-secondary">Precio unitario: $ {{ platoSeleccionado.platos.precioPlato }}</li>
                        </ul>
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-success">Porciones: {{ platoSeleccionado.porcionPlato }}</li>
                        </ul>
                    </div>
                </ng-container>
            </div>
            <div class="text-center">
                <button class="btn btn-outline-light" type="button" (click)="enviarDetallePedidos()">
                    ENVIAR PEDIDO
                </button>
            </div>
            <br>
            <br>
        </div>
    </div>
    <br>
    <br>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" />
